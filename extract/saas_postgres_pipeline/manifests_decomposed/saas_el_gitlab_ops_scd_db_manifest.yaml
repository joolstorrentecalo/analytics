connection_info:
  postgres_source_connection:
    database: GITLAB_OPS_DB_NAME
    host: GITLAB_OPS_DB_HOST
    pass: GITLAB_OPS_DB_PASS
    port: PG_PORT
    user: GITLAB_OPS_DB_USER
tables:
  members:
    advanced_metadata: true
    dbt_source_model: true
    export_schema: 'gitlab_ops_net'
    export_table: 'members'
    export_table_primary_key: id
    import_db: GITLAB_OPS_DB
    import_query: |-
      SELECT id
      , access_level
      , source_id
      , source_type
      , user_id
      , notification_level
      , type
      , created_at
      , created_by_id
      , NULL AS invite_email
      , invite_accepted_at
      , NULL AS invite_token
      , requested_at
      , CASE WHEN expires_at > '2262-01-01' THEN '2262-01-01' ELSE expires_at END AS expires_at
      , ldap
      , override
      , member_role_id
      FROM members
