version: 2

models:
  - name: wk_customers_db_license_versions
    tags: ["exception", "product"]
    description: Self-managed EE instances will send seat link information to the customers portal on a daily basis. This information includes a license version data. Additional detail can be found in [this doc](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/staging/doc/reconciliations.md).
    columns:
      - name: id
        description: Pseudo ID generated to simulate Primary Key
        tags:
          - customers_db
      - name: item_id
        description: Line if for item
        tags:
          - customers_db
      - name: created_at
        description: Timestamp when the record was created
        tags:
          - customers_db
      - name: item_type
        description: Item type, for example - License
        tags:
          - customers_db
      - name: event
        description: Name of the event, for example - create, update
        tags:
          - customers_db
      - name: whodunnit
        description: Email for licensing
        tags:
          - customers_db
      - name: whodunnit_gitlab
        description: Email for licensing, contains either @gitlab.com email (value from whodunnit)  or NULL
        tags:
          - customers_db
      - name: whodunnit_gitlab_desc
        description: Email for licensing, contains either @gitlab.com email or NULL. Can contain `Admin` string
        tags:
          - customers_db
      - name: object
        description: Details about license
        tags:
          - customers_db
      - name: object_changes
        description: Details about license changes
        tags:
          - customers_db
      - name: _uploaded_at
        description: Timestamp when record is inserted in the RAW layer

  - 
  
  name: wk_rpt_namespace_onboarding
    description: '{{ doc("wk_rpt_namespace_onboarding") }}'
    columns:
      - name: ultimate_parent_namespace_id
        description: '{{ doc("dim_ultimate_parent_namespace_id") }}'
        tests:
          - not_null
          - unique
      - name: namespace_created_at
      - name: namespace_created_date
      - name: namespace_created_month
      - name: namespace_created_week
      - name: creator_id
      - name: namespace_type
      - name: setup_for_company
      - name: visibility_level
      - name: current_gitlab_plan_id
      - name: current_gitlab_plan_title
      - name: current_project_count
      - name: days_since_namespace_creation
      - name: handraise_pql_date
      - name: is_namespace_created_within_2min_of_creator_invite_acceptance
      - name: trial_start_date
      - name: days_since_namespace_creation_at_trial
      - name: first_paid_subscription_start_date
      - name: days_since_namespace_creation_at_first_paid_subscription
      - name: first_paid_plan_name
      - name: is_first_paid_plan_purchased_through_subscription_portal
      - name: days_since_namespace_creation_at_activation_event 
      - name: activation_event_array 
      - name: acitivity_between_d60_d90
      - name: creator_is_valuable_signup 
      - name: namespace_contains_valuable_signup
      - name: has_team_activation
      - name: namespace_creator_role 
      - name: namespace_creator_jtbd
      - name: days_since_namespace_creation_at_first_plan_event_date
      - name: days_since_namespace_creation_at_first_secure_event_date
      - name: days_since_namespace_creation_at_first_create_event_date 
      - name: days_since_namespace_creation_at_first_verify_event_date
      - name: days_since_namespace_creation_at_first_release_event_date
      - name: days_since_latest_plan_event_date
      - name: days_since_latest_secure_event_date
      - name: days_since_latest_create_event_date 
      - name: days_since_latest_verify_event_date
      - name: days_since_latest_release_event_date
      - name: stage_adoption_order
      - name: total_stages_adopted
        description: Unique count of product stages adopted all time.
      - name: current_billable_member_count
      - name: current_month_storage_gib  
      - name: first_activity_date  
      - name: latest_activity_date 
      - name: dbt_updated_at
      - name: dbt_created_at

  - name: suggested_merge_request_reviewers
    description: Table for exploring the suggested reviewers for a merge request

  - name: wk_gitlab_dotcom_namespace_details
    description: Workspace table for exposing gitlab_dotcom_namespace_details table to Sisense.

  - name: wk_gitlab_dotcom_namespace_details_snapshots
    description: Workspace table for exposing gitlab_dotcom_namespace_details_snapshots table to Sisense.

  - name: wk_gitlab_dotcom_web_hooks
    description: Workspace table for exposing gitlab_dotcom_web_hooks table to Sisense.

  - name: wk_rpt_product_navigation_base
    description: Workspace table for tracking Navigation events for easier and faster querying to Sisense.